generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"   
  url      = env("DATABASE_URL")
}

model users {
  id         Int         @id @default(autoincrement())
  nama       String
  email      String      @unique
  password   String
  role       String      @default("spg")
  created_at DateTime    @default(now())
  penjualan  penjualan[]
}

model produk {
  id              Int         @id @default(autoincrement())
  nama            String
  sku             String?
  category        String?
  pcs_per_karton  Int         @default(1)
  status          String      @default("Aktif")
  created_at      DateTime    @default(now())
  penjualan       penjualan[]
}

model penjualan {
  id                  Int      @id @default(autoincrement())
  spg_id              Int
  produk_id           Int
  tanggal             DateTime
  penjualan_karton    Int      @default(0)
  penjualan_pcs       Int      @default(0)
  harga_karton        Decimal  @default(0)
  harga_pcs           Decimal  @default(0)
  nama_toko_transaksi String
  notes               String?
  total               Decimal
  created_at          DateTime @default(now())

  produk              produk   @relation(fields: [produk_id], references: [id])
  user                users    @relation(fields: [spg_id], references: [id])

  @@index([produk_id])
  @@index([spg_id])
}

model employees {
  id         Int       @id @default(autoincrement())
  nama       String
  email      String?
  posisi     String?
  kontak     String?
  alamat     String?
  status     String    @default("Aktif")
  join_date  DateTime?
  created_at DateTime  @default(now())
}
